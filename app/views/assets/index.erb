<div class="search-view">
<% if (presenter.is_search?) %>
<% presenter.search_parameters do |param| %>
  <div class="alert alert-info">Search results where <%= param %></div>
<% end %>
<% end %>
<h3>Filter by:  <small><strong>Edit</strong></small> </h3>
<form class="form-inline" role="form" action="/assets" method="POST">
  <input type="hidden" name="_method" value="PUT"/>
  
  <div class="row">
  <div class="form-group col-sm-6">
    <label for="filter-study" class="col-sm-3 control-label">Study</label>
    <div class="col-sm-9">
      <input type="text" id="filter-study" class="form-control" style="width: 100%" name="study" placeholder="Enter a study or abbreviation" autocomplete="off">
    </div>
  </div>
  <div class="form-group col-sm-6">
    <label for="filter-workflow" class="col-sm-4 control-label">Workflow</label>
    <div class="col-sm-8">
<select id="filter-workflow" name="workflow_id" style="width: 100%" class="form-control">
  <option value="" default>Any workflow</option>
<% presenter.each_workflow do |name, comment, id| %>
  <option value="<%= name %>" <%= (presenter.workflow==name) ? 'selected' : '' %> ><%= name %></option>
<% end %>
</select>
    </div>
  </div>
  </div>
  
<% presenter.each_asset_type do |asset_type_name,asset_type_identifier,has_sample_count| %>
<div class="asset-group-view row">
<h3><%= asset_type_name %> <small><strong>Edit</strong></small>  <span class="badge"><%= presenter.num_assets(asset_type_name) %></span>
 </h3>

<% if presenter.has_assets?(asset_type_name) %>
   <% if (!presenter.is_search?) %>
     <small><span><a class="selectable">Select all</a> | <a class="selectable">Unselect</a></small>
   <% end %>
   
  <table class="table table-striped table-bordered filter-table with-button-per-row table-condensed">
  <thead>
  <tr><th>Type</th><th>Id</th><th>Study</th><th>Batch</th>
  <% if has_sample_count %><th>Num. Samples</th><% end %>
  <th>Workflow</th>
  <th>Created at</th>
  <th>Completed?</th>
  </tr>
  </thead>
  <tbody>
  <%= erb(:"assets/_asset_group", :layout => false, :locals => {:presenter => presenter, :asset_group_name => asset_type_name, :has_sample_count => has_sample_count,
          :asset_fields => [:identifier_type, :identifier, :study, :batch_id, :sample_count, :workflow, :created_at, :completed_at] }) %>
  </tbody>
  </table>
  
<% else %>
<p>This group is empty</p>
<% end %>
</div>
<% end %>


  <div class="form-group center-block">
      <button type="submit" class="btn btn-default">Update</button>
  </div>  
</form>


  </div>
  <div class="container" id="footer">
  </div>
</body>
</html>